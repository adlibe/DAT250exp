var ye=Object.defineProperty;var Oe=(t,e,n)=>e in t?ye(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Z=(t,e,n)=>Oe(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function N(){}function ke(t){return t()}function oe(){return Object.create(null)}function B(t){t.forEach(ke)}function we(t){return typeof t=="function"}function z(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Ce(t){return Object.keys(t).length===0}function d(t,e){t.appendChild(e)}function E(t,e,n){t.insertBefore(e,n||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function G(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function L(t){return document.createTextNode(t)}function P(){return L(" ")}function A(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ee(t){let e;return{p(...n){e=n,e.forEach(l=>t.push(l))},r(){e.forEach(n=>t.splice(t.indexOf(n),1))}}}function Ue(t){return Array.from(t.childNodes)}function K(t,e){e=""+e,t.data!==e&&(t.data=e)}function F(t,e){t.value=e??""}let ne;function R(t){ne=t}const M=[],se=[];let D=[];const ie=[],Se=Promise.resolve();let ee=!1;function Ae(){ee||(ee=!0,Se.then(Pe))}function te(t){D.push(t)}const x=new Set;let J=0;function Pe(){if(J!==0)return;const t=ne;do{try{for(;J<M.length;){const e=M[J];J++,R(e),Ne(e.$$)}}catch(e){throw M.length=0,J=0,e}for(R(null),M.length=0,J=0;se.length;)se.pop()();for(let e=0;e<D.length;e+=1){const n=D[e];x.has(n)||(x.add(n),n())}D.length=0}while(M.length);for(;ie.length;)ie.pop()();ee=!1,x.clear(),R(t)}function Ne(t){if(t.fragment!==null){t.update(),B(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(te)}}function je(t){const e=[],n=[];D.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),D=e}const Y=new Set;let T;function re(){T={r:0,c:[],p:T}}function ue(){T.r||B(T.c),T=T.p}function j(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function I(t,e,n,l){if(t&&t.o){if(Y.has(t))return;Y.add(t),T.c.push(()=>{Y.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}function V(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function le(t){t&&t.c()}function H(t,e,n){const{fragment:l,after_update:o}=t.$$;l&&l.m(e,n),te(()=>{const s=t.$$.on_mount.map(ke).filter(we);t.$$.on_destroy?t.$$.on_destroy.push(...s):B(s),t.$$.on_mount=[]}),o.forEach(te)}function Q(t,e){const n=t.$$;n.fragment!==null&&(je(n.after_update),B(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Le(t,e){t.$$.dirty[0]===-1&&(M.push(t),Ae(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function W(t,e,n,l,o,s,i=null,c=[-1]){const r=ne;R(t);const f=t.$$={fragment:null,ctx:[],props:s,update:N,not_equal:o,bound:oe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:oe(),dirty:c,skip_bound:!1,root:e.target||r.$$.root};i&&i(f.root);let v=!1;if(f.ctx=n?n(t,e.props||{},(h,p,...a)=>{const m=a.length?a[0]:p;return f.ctx&&o(f.ctx[h],f.ctx[h]=m)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](m),v&&Le(t,h)),p}):[],f.update(),v=!0,B(f.before_update),f.fragment=l?l(f.ctx):!1,e.target){if(e.hydrate){const h=Ue(e.target);f.fragment&&f.fragment.l(h),h.forEach(C)}else f.fragment&&f.fragment.c();e.intro&&j(t.$$.fragment),H(t,e.target,e.anchor),Pe()}R(r)}class X{constructor(){Z(this,"$$");Z(this,"$$set")}$destroy(){Q(this,1),this.$destroy=N}$on(e,n){if(!we(n))return N;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(e){this.$$set&&!Ce(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const qe="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qe);function Fe(t){let e,n,l;return{c(){e=b("button"),e.textContent="Create User"},m(o,s){E(o,e,s),n||(l=A(e,"click",t[0]),n=!0)},p:N,i:N,o:N,d(o){o&&C(e),n=!1,l()}}}function Ve(t,e,n){let{addUser:l}=e;function o(){const s=prompt("Enter username: "),i=prompt("Enter email: ");s&&i?(l({username:s,email:i}),alert("User created!")):alert("Please provide both username and email.")}return t.$$set=s=>{"addUser"in s&&n(1,l=s.addUser)},[o,l]}class Ie extends X{constructor(e){super(),W(this,e,Ve,Fe,z,{addUser:1})}}function ce(t,e,n){const l=t.slice();return l[10]=e[n],l}function fe(t){let e,n=t[10].caption+"",l;return{c(){e=b("li"),l=L(n),k(e,"class","svelte-1nh7v3g")},m(o,s){E(o,e,s),d(e,l)},p(o,s){s&4&&n!==(n=o[10].caption+"")&&K(l,n)},d(o){o&&C(e)}}}function Te(t){let e,n,l,o,s,i,c,r,f,v,h,p,a,m,$,S,U=V(t[2]),O=[];for(let u=0;u<U.length;u+=1)O[u]=fe(ce(t,U,u));return{c(){e=b("div"),n=b("h2"),n.textContent="Create a Poll",l=P(),o=b("input"),s=P(),i=b("input"),c=P(),r=b("input"),f=P(),v=b("button"),v.textContent="Add Option",h=P(),p=b("ul");for(let u=0;u<O.length;u+=1)O[u].c();a=P(),m=b("button"),m.textContent="Create Poll",k(o,"placeholder","Enter poll question"),k(o,"class","svelte-1nh7v3g"),k(i,"type","date"),k(i,"class","svelte-1nh7v3g"),k(r,"placeholder","Add a vote option"),k(r,"class","svelte-1nh7v3g"),k(v,"class","svelte-1nh7v3g"),k(p,"class","svelte-1nh7v3g"),k(m,"class","svelte-1nh7v3g"),k(e,"class","svelte-1nh7v3g")},m(u,g){E(u,e,g),d(e,n),d(e,l),d(e,o),F(o,t[0]),d(e,s),d(e,i),F(i,t[1]),d(e,c),d(e,r),F(r,t[3]),d(e,f),d(e,v),d(e,h),d(e,p);for(let _=0;_<O.length;_+=1)O[_]&&O[_].m(p,null);d(e,a),d(e,m),$||(S=[A(o,"input",t[7]),A(i,"input",t[8]),A(r,"input",t[9]),A(v,"click",t[4]),A(m,"click",t[5])],$=!0)},p(u,[g]){if(g&1&&o.value!==u[0]&&F(o,u[0]),g&2&&F(i,u[1]),g&8&&r.value!==u[3]&&F(r,u[3]),g&4){U=V(u[2]);let _;for(_=0;_<U.length;_+=1){const y=ce(u,U,_);O[_]?O[_].p(y,g):(O[_]=fe(y),O[_].c(),O[_].m(p,null))}for(;_<O.length;_+=1)O[_].d(1);O.length=U.length}},i:N,o:N,d(u){u&&C(e),G(O,u),$=!1,B(S)}}}function Be(t,e,n){let{addPoll:l}=e,o="",s="",i=[],c="";function r(){c.trim()&&(n(2,i=[...i,{caption:c}]),n(3,c=""))}async function f(){const a={question:o,validUntil:new Date(s).toISOString(),voteOptions:i};l(a)}function v(){o=this.value,n(0,o)}function h(){s=this.value,n(1,s)}function p(){c=this.value,n(3,c)}return t.$$set=a=>{"addPoll"in a&&n(6,l=a.addPoll)},[o,s,i,c,r,f,l,v,h,p]}class Je extends X{constructor(e){super(),W(this,e,Be,Te,z,{addPoll:6})}}function ae(t,e,n){const l=t.slice();return l[5]=e[n],l}function de(t){let e,n,l,o=!1,s,i,c=t[5].caption+"",r,f,v,h,p;return v=Ee(t[4][0]),{c(){e=b("li"),n=b("input"),s=P(),i=b("label"),r=L(c),f=P(),k(n,"type","radio"),k(n,"name","vote"),n.__value=l=t[5].caption,F(n,n.__value),k(e,"class","svelte-lei5um"),v.p(n)},m(a,m){E(a,e,m),d(e,n),n.checked=n.__value===t[1],d(e,s),d(e,i),d(i,r),d(e,f),h||(p=A(n,"change",t[3]),h=!0)},p(a,m){m&1&&l!==(l=a[5].caption)&&(n.__value=l,F(n,n.__value),o=!0),(o||m&3)&&(n.checked=n.__value===a[1]),m&1&&c!==(c=a[5].caption+"")&&K(r,c)},d(a){a&&C(e),v.r(),h=!1,p()}}}function Me(t){let e,n,l=t[0].question+"",o,s,i,c,r,f,v,h=V(t[0].voteOptions),p=[];for(let a=0;a<h.length;a+=1)p[a]=de(ae(t,h,a));return{c(){e=b("h2"),n=L("Voting on Poll: "),o=L(l),s=P(),i=b("ul");for(let a=0;a<p.length;a+=1)p[a].c();c=P(),r=b("button"),r.textContent="Submit Vote",k(i,"class","svelte-lei5um"),k(r,"class","svelte-lei5um")},m(a,m){E(a,e,m),d(e,n),d(e,o),E(a,s,m),E(a,i,m);for(let $=0;$<p.length;$+=1)p[$]&&p[$].m(i,null);E(a,c,m),E(a,r,m),f||(v=A(r,"click",t[2]),f=!0)},p(a,[m]){if(m&1&&l!==(l=a[0].question+"")&&K(o,l),m&3){h=V(a[0].voteOptions);let $;for($=0;$<h.length;$+=1){const S=ae(a,h,$);p[$]?p[$].p(S,m):(p[$]=de(S),p[$].c(),p[$].m(i,null))}for(;$<p.length;$+=1)p[$].d(1);p.length=h.length}},i:N,o:N,d(a){a&&(C(e),C(s),C(i),C(c),C(r)),G(p,a),f=!1,v()}}}function De(t,e,n){let{poll:l}=e,o=null;function s(){alert(o?`You voted: ${o.caption}`:"Select an option before submitting.")}const i=[[]];function c(){o=this.__value,n(1,o)}return t.$$set=r=>{"poll"in r&&n(0,l=r.poll)},[l,o,s,c,i]}class Ke extends X{constructor(e){super(),W(this,e,De,Me,z,{poll:0})}}function he(t,e,n){const l=t.slice();return l[16]=e[n],l}function pe(t,e,n){const l=t.slice();return l[19]=e[n],l}function _e(t){let e,n;return e=new Je({props:{addPoll:t[10]}}),{c(){le(e.$$.fragment)},m(l,o){H(e,l,o),n=!0},p:N,i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function me(t){let e,n,l,o=V(t[5]),s=[];for(let i=0;i<o.length;i+=1)s[i]=ge(pe(t,o,i));return{c(){e=b("h2"),e.textContent="Users",n=P(),l=b("ul");for(let i=0;i<s.length;i+=1)s[i].c();k(l,"class","svelte-r92tkc")},m(i,c){E(i,e,c),E(i,n,c),E(i,l,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(i,c){if(c&32){o=V(i[5]);let r;for(r=0;r<o.length;r+=1){const f=pe(i,o,r);s[r]?s[r].p(f,c):(s[r]=ge(f),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(i){i&&(C(e),C(n),C(l)),G(s,i)}}}function ge(t){let e,n=t[19].username+"",l,o,s=t[19].email+"",i;return{c(){e=b("li"),l=L(n),o=L(" - "),i=L(s),k(e,"class","svelte-r92tkc")},m(c,r){E(c,e,r),d(e,l),d(e,o),d(e,i)},p(c,r){r&32&&n!==(n=c[19].username+"")&&K(l,n),r&32&&s!==(s=c[19].email+"")&&K(i,s)},d(c){c&&C(e)}}}function ve(t){let e,n,l,o=V(t[6]),s=[];for(let i=0;i<o.length;i+=1)s[i]=be(he(t,o,i));return{c(){e=b("h2"),e.textContent="Polls",n=P(),l=b("ul");for(let i=0;i<s.length;i+=1)s[i].c();k(l,"class","svelte-r92tkc")},m(i,c){E(i,e,c),E(i,n,c),E(i,l,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,null)},p(i,c){if(c&4160){o=V(i[6]);let r;for(r=0;r<o.length;r+=1){const f=he(i,o,r);s[r]?s[r].p(f,c):(s[r]=be(f),s[r].c(),s[r].m(l,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=o.length}},d(i){i&&(C(e),C(n),C(l)),G(s,i)}}}function be(t){let e,n=t[16].question+"",l,o,s,i,c,r;function f(){return t[13](t[16])}return{c(){e=b("li"),l=L(n),o=P(),s=b("button"),s.textContent="Vote on this Poll",i=P(),k(s,"class","svelte-r92tkc"),k(e,"class","svelte-r92tkc")},m(v,h){E(v,e,h),d(e,l),d(e,o),d(e,s),d(e,i),c||(r=A(s,"click",f),c=!0)},p(v,h){t=v,h&64&&n!==(n=t[16].question+"")&&K(l,n)},d(v){v&&C(e),c=!1,r()}}}function $e(t){let e,n;return e=new Ke({props:{poll:t[4]}}),{c(){le(e.$$.fragment)},m(l,o){H(e,l,o),n=!0},p(l,o){const s={};o&16&&(s.poll=l[4]),e.$set(s)},i(l){n||(j(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){Q(e,l)}}}function Re(t){let e,n,l,o,s,i,c,r,f,v,h,p,a,m,$,S,U,O;s=new Ie({props:{addUser:t[11]}});let u=t[0]&&_e(t),g=t[1]&&t[5].length>0&&me(t),_=t[2]&&t[6].length>0&&ve(t),y=t[3]&&t[4]&&$e(t);return{c(){e=b("main"),n=b("h1"),n.textContent="Poll App",l=P(),o=b("div"),le(s.$$.fragment),i=P(),c=b("button"),c.textContent="Create Poll",r=P(),f=b("button"),f.textContent="Show Users",v=P(),h=b("button"),h.textContent="Show Polls",p=P(),u&&u.c(),a=P(),g&&g.c(),m=P(),_&&_.c(),$=P(),y&&y.c(),k(c,"class","svelte-r92tkc"),k(f,"class","svelte-r92tkc"),k(h,"class","svelte-r92tkc"),k(o,"class","button-container svelte-r92tkc"),k(e,"class","svelte-r92tkc")},m(w,q){E(w,e,q),d(e,n),d(e,l),d(e,o),H(s,o,null),d(o,i),d(o,c),d(o,r),d(o,f),d(o,v),d(o,h),d(e,p),u&&u.m(e,null),d(e,a),g&&g.m(e,null),d(e,m),_&&_.m(e,null),d(e,$),y&&y.m(e,null),S=!0,U||(O=[A(c,"click",t[7]),A(f,"click",t[8]),A(h,"click",t[9])],U=!0)},p(w,[q]){w[0]?u?(u.p(w,q),q&1&&j(u,1)):(u=_e(w),u.c(),j(u,1),u.m(e,a)):u&&(re(),I(u,1,1,()=>{u=null}),ue()),w[1]&&w[5].length>0?g?g.p(w,q):(g=me(w),g.c(),g.m(e,m)):g&&(g.d(1),g=null),w[2]&&w[6].length>0?_?_.p(w,q):(_=ve(w),_.c(),_.m(e,$)):_&&(_.d(1),_=null),w[3]&&w[4]?y?(y.p(w,q),q&24&&j(y,1)):(y=$e(w),y.c(),j(y,1),y.m(e,null)):y&&(re(),I(y,1,1,()=>{y=null}),ue())},i(w){S||(j(s.$$.fragment,w),j(u),j(y),S=!0)},o(w){I(s.$$.fragment,w),I(u),I(y),S=!1},d(w){w&&C(e),Q(s),u&&u.d(),g&&g.d(),_&&_.d(),y&&y.d(),U=!1,B(O)}}}function Ye(t,e,n){let l=!1,o=!1,s=!1,i=!1,c=null,r=[],f=[];async function v(){const u=await fetch("http://localhost:8080/users");if(u.ok){const g=await u.json();n(5,r=g)}else console.error("Failed to fetch users")}async function h(){const u=await fetch("http://localhost:8080/polls");if(u.ok){const g=await u.json();n(6,f=g)}else console.error("Failed to fetch polls")}function p(){n(0,l=!l)}function a(){n(1,o=!o),o&&v()}async function m(){if(n(2,s=!s),s)try{const g=await(await fetch("http://localhost:8080/polls")).json();n(6,f=g)}catch(u){console.error("Error fetching polls:",u)}else n(3,i=!1)}async function $(u){(await fetch("http://localhost:8080/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok?(h(),n(0,l=!1)):console.error("Failed to add poll")}async function S(u){(await fetch("http://localhost:8080/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)})).ok?v():console.error("Failed to add user")}function U(u){n(4,c=u),n(3,i=!0)}return[l,o,s,i,c,r,f,p,a,m,$,S,U,u=>U(u)]}class ze extends X{constructor(e){super(),W(this,e,Ye,Re,z,{})}}new ze({target:document.getElementById("app")});
